// "To Go Off And Things"
// song @by Cardiacs
// script @by eefano
setcps(230/60)

$: `<0@28 1@14 2@14 1@14 2@14 3@28 1@14 2@14 3@28 1@28 4@28 
     ~@28 5@56 6@14 ~@24 7@24 ~@2 ~@42 1@14 2@14 3@21 [3,4]@7 0@3 ~@53>`
  .pickRestart([
  "<[0,6]@6 ~>",
  "<[8 7 6 5 6 7 8 9 8 7 6 <5 ~>]@6 ~>",
  "<[9 7 8]@6 6 5@5 ~@2>",
  "<[-2 [<2b 2 2b>@2 ~]!3]*3@6 ~ >",
  irand(15).seg(1),
  "<0@8 -1@6 -2@8 -3@6>".sub(6),
  "<-6@6 ~>",
  "<~ 7 ~ 5 5 ~ ~ ~ 7 ~ ~ 6 ~ 7 ~ 5 5 ~ 7 7 ~ ~ 9 7 >"
]).n().scale("d5:whole:tone").s("gm_synth_strings_1").gain(.9)

$: `<0@28 0@28 0@28 1@28 0@28 1@28 2@28 1@28 
     3@84 4@14 5@24 6@24 7@2 8@14 9@20 ~ 10@7 0@28 1@28 [8!5 ~]@3 ~@53>`
  .pickRestart([
  "<6*12@6 ~>",
  "<[[4,6,8b] [4,6b,8] [4,6,8b]]@6 ~>",
  "<[0,4b,6]@6 ~>",
  "<6@3 7 8@3 9 6@3 7 8@3 9 8 9 8 7 6 ~ 8 9 8 7 6 ~ >*2".add("<3 4 5@2 [5,7]@2 >/14"),
  "<9 8 7 6 9 8 7 6 9 8 7 6 ~ ~>*2".add("5,7"),
  "<0*2 [0,4b,2] -2*2 [-2,6,2b] 2*2 [2,4,6b]>",
  "<1*2 [1,5b,3] -1*2 [-1,5,3b] 3*2 [3,5,7b]>",
  "<[4,6,2b] [5,7,3b]>",
  "[0,6]".struct("[x*2 [x x*2] [x*2]!4 ~]/7"),
  irand(12).add(8).seg(2),
  "<12 ~ 12 10 ~ 10 ~ ~ 16!3 13 ~ ~>*2",
]).n().scale("d3:whole:tone").s("gm_distortion_guitar:3").clip(.96).rel(.02).gain(1).pan(.47)

$: `<0@28 ~@28 ~@28 1@28 ~@28 1@28 2@28 3@28 
     ~@84 ~@14 ~@24 ~@24 ~@2 ~@42 0@28 1@28 [0!5 ~]@3 ~@53>`
  .pickRestart([
  "<[0,6]@6 ~>",
  "<[~ 6!3 ~ 6b!3 ~ 6!3]@6 ~>",
  "<6!6 6*2 6!6 6*2 8!6 8*2 8!6 8*2>",
  irand(12).seg(2).add(3)
]).n().scale("d3:whole:tone").s("gm_baritone_sax").clip(.85).rel(.02).gain(.9).pan(.53)

$: `<0@28 0@28 0@28 1@28 0@28 1@28 0@28 1@28 2@28 
     3@56 0@14 ~@24 4@24 5@2 ~@14 0@21 6@7 0@28 1@28 0@3 ~@53>`
  .pickRestart([
  "<6*12@6 ~>",
  "<[4 8 4]@6 ~>",
  "<[6@3 6]!5 [6 ~ 6@3 6!2 ~]@2>/2",
  "6".add("<0@8 -1@6 -2@8 -3@6>"),
  "<7 1 5 3b 5 <5 1b 5 1b>>",
  "<4 5>",
  "<6 ~ 6 4 ~ 4 ~ ~ 10!3 7 ~ ~>*2"
]).n().scale("d2:whole:tone").s("gm_electric_bass_finger:7").pan(.5).lpf(800).gain(1)

$: `<0@25 1@3 0@25 1@3 0@25 1@3 2@28 0@25 1@3 2@28 3@25 1@3 2@25 1@3 
     4@78 5@6 3@11 1@3 8 ~@19 6@4 7@24 8@2 ~@14 0@25 9@3 0@25 1@3 2@28 10@3 11@35 ~@18>`
  .pickRestart([
  "<oh!6 ~,bd sd [~ bd] sd [~ bd] sd ~>",
  "<[oh,bd sd*2] sd*6@3>",
  "<cr,rd!8,bd sd [~ bd] sd [~ bd] sd [~ sd]>",
  "<oh!7,bd sd [~ bd] sd [~ bd] sd sd*2>",
  "hh,<bd sd>",
  "<bd [sd,oh]@2>*2",
  "<[~ [ht ht*3]] [ht*2 ht]>/2",
  "<oh!8,bd bd [~ sd] bd sd <~ sd sd ~> >",
  "cr,bd",
  "<[bd,oh sd] sd*2 ~>",
  "<sd*2 sd*2 [oh,bd]>",
  "<hh,hh!2 ~ hh!2 ~ hh!2 ~ hh!2 ~ hh ~>*2"
]).s().clip(1).rel(.15).gain(.55)

all(x=>x.room(.15)
 // .ribbon(14*21 + 24*2 + 2  ,28*4)
)